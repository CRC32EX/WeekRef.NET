---
Title: "2021-10-01: NuGet.org, Windows Community Toolkit v7.1, Npgsql 6.0.0 RC1, ReSharper 2021.3 & Rider 2021.3 EAP"
Published: 2021/10/01
DestinationPath: 2021/10/01/updates.html
---
<!--
# yyyy-MM-dd
## 主なトピックス
## ヘッドライン
## アーティクル、スライドなど
## ライブラリ、リポジトリ、ツールなど
## サイト、ドキュメントなど
### ツイート
## Deep Dive
-->


## トピックス
### Introducing the New NuGet.org Package Details Page - The NuGet Blog
https://devblogs.microsoft.com/nuget/introducing-the-new-nuget-org-package-details-page/

NuGet.org のパッケージ詳細ページが4年ぶりに新デザインに刷新された。

デザイン変更した理由として、2021年の5月からパッケージに含まれる README を表示する機能が追加され、今後[ターゲットフレームワークに関する情報を表示する予定もある](https://github.com/NuGet/Home/pull/10900)が、要素を追加するためのスペースが不足してきたためタブデザインで逃がすことにした。

記事では実際にリリースされるまでのフィードバックについても触れている。

### Announcing Windows Community Toolkit v7.1 - Windows Developer Blog
https://blogs.windows.com/windowsdeveloper/2021/09/23/announcing-windows-community-toolkit-v7-1/

Windows Community Toolkit v7.1 がリリース。

Microsoft ID 認証のヘルパーとプロバイダーの刷新と Microsoft Graph API と OneDrive をサポートするヘルパー API とコントロールの提供。

コントロールにドロップシャドウをつけるためのスタイルを追加。既存の DropShadowPanel コントロールに代わるものでコントロールをラップせずスタイルとして適用する。実装には Win2D ベースの　`AttachedCardShadow` と UWP の Composition ベースの `AttachedDropShadow` がある。`AttachedCardShadow` は Win2D への依存があり矩形のみのサポートとなるがパフォーマンスもよい、`AttachedDropShadow` は Composition を使用するため UWP アプリでのみ使用できるがマスク画像やテキストなどもサポートするといった違いがある。

- [Attached Shadows - Windows Community Toolkit | Microsoft Docs](https://docs.microsoft.com/en-us/windows/communitytoolkit/helpers/attachedshadows)

RichSuggestBox コントロールの追加。`@` によるユーザー名のサジェストのようなものを提供できる RichEditBox。

MVVM Source Generator がプレビューで追加され、`ObservableProperty`, `ICommand`, `INotifyPropertyChanged` 属性などでマークすることでボイラープレートコードの生成が行えるようになった。

そのほか Toolkit Labs という形で実験的なパッケージが提供されるようになった。今後 Lab リポジトリなどが用意される予定。すでに物体認識のような Intelligent APIs や視線入力の Gaze Controls といったものがある。

### Release v6.0.0-rc.1 · npgsql/npgsql
https://github.com/npgsql/npgsql/releases/tag/v6.0.0-rc.1

Npgsql v6.0.0 RC1 がリリース。

6.0 ではロードバランシングなどを含むマルチホスト接続、タイムスタンプの改善、Raw SQL の発行や .NET 6 で導入されたバッチ API を使用したバッチ実行、.NET 6 の DateOnly/TimeOnly のサポートの追加など。

Raw SQL の発行は Npgsql がクエリーを書き換えずパラメータを送信するようにする仕組みで、以前の名前付きパラメータに代わるもの。名前付きパラメータはクエリーをパースし、書き換えてから PostgreSQL に送信していたが Raw SQL ではクエリーはそのまま PostgreSQL へ送信するため安全性が高まり、クエリーも効果的になるとのこと。

- [Npgsql 6.0 Release Notes | Npgsql Documentation](https://www.npgsql.org/doc/release-notes/6.0.html)
- [Query parameters, batching and SQL rewriting - Shay Rojansky’s Blog](https://www.roji.org/parameters-batching-and-sql-rewriting)
- [New System.Data.Common batching API · Issue #28633 · dotnet/runtime](https://github.com/dotnet/runtime/issues/28633)

### Release v1.41.0 · grpc/grpc
https://github.com/grpc/grpc/releases/tag/v1.41.0

gRPC v1.41.0 がリリース。

C# (C-core) に関連する変更としては非常に稀なケースでレスポンスのメタデータが破損してしまう問題の修正、non-ASCII な環境でネイティブライブラリーへのパスに non-ASCII な文字が含まれる場合に読み込み失敗してしまうことがある問題の修正など。

### Rider 2021.3 Early Access Program Has Launched! | The .NET Tools Blog
https://blog.jetbrains.com/dotnet/2021/09/28/rider-2021-3-eap/

Rider 2021.3 EAP (早期アクセス)がリリース。

ソリューションにまつわる問題点を一覧できる Problems View が追加。コードに関連する問題以外も NuGet や .NET SDK といったツールや環境に関する問題を列挙してその場で対応できる。

.NET 6 SDK に対応、Debug タブの UI 変更、デバッガーの改善により UWP のサポートと Windows 上での Windows Docker コンテナー内でのデバッグが可能となった。

file-scoped namespace のような C# 10 に関連した言語の対応やコード解析、SQL 言語 Injection のサポート改善、Unity 向けのコードで XML ドキュメントを `Tooltip` 属性に変換する機能、Apple Silicon 向けビルドの提供、プロジェクトとソリューションのプロパティーウィンドウの改修など。

### ReSharper 2021.3 Starts Early Access Program! | The .NET Tools Blog
https://blog.jetbrains.com/dotnet/2021/09/28/resharper-2021-3-eap/

ReSharper 2021.3 EAP (早期アクセス)がリリース。

Visual Studio 2022 Preview のサポート。file-scoped namespace のような C# 10 に関連した言語の対応やコード解析の改善。

`Namespace.Type.Member` といった FQN 形式でコピーする Copy FQN が Copy Code Reference に変わり、GitHub へのリンクやカスタム URL パターンを定義してコピーできるようになった。

.NET 5 SDK から対応した AnalyzerConfig ファイルに ReSherper も対応した。パラメータやフィールドを `LanguageInjection` 属性でマークすることで Language Injection を有効化できるようになった。

dotMemory は Windows では ETW イベントを使用してアロケーションをサンプリングできるように。正確さは以前の手法には劣るがパフォーマンスペナルティがない、集めるために有効にする必要がない、すでに動作中のアプリケーションでも集められるといった利点がある。

### Avoiding Memory Leaks in Visual Studio Editor Extensions - Visual Studio Blog
https://devblogs.microsoft.com/visualstudio/avoiding-memory-leaks-in-visual-studio-editor-extensions/

### Announcing: Azure credits for open source projects - Microsoft Open Source Blog
https://cloudblogs.microsoft.com/opensource/2021/09/28/announcing-azure-credits-for-open-source-projects/

### VS Code in the browser for everyone
https://www.gitpod.io/blog/openvscode-server-launch

## アーティクル、スライドなど
### How to Deploy a Dockerized Web App to Heroku using the GitHub Actions
https://enlear.academy/how-to-deploy-a-dockerized-web-app-to-heroku-using-the-github-actions-f16c00b19621

### Implicit Usings in .NET 6
https://www.hanselman.com/blog/implicit-usings-in-net-6

### C# 10.0 の補間文字列の改善
https://ufcpp.net/study/csharp/start/improvedinterpolatedstring/

### NSubstitute を使った処理の置き換え - Qiita
https://qiita.com/arahori/items/8bcb0f770a0bfb5f7e54

### 自作のWPFアプリを後から自動テスト・DI・CI/CD対応にしてみる。その3 - Qiita
https://qiita.com/soi/items/e5f01c66c0a303a74c30

### Separating Concerns with Pipes & Filters
https://codeopinion.com/separating-concerns-with-pipes-filters/

### C# での Web アプリ開発で、要求 URL 中のクエリ文字列をいい感じに読み取る - 特に Blazor WebAssembly (とりわけ .NET 5 以前) での注意点 : @jsakamoto
https://devadjust.exblog.jp/28884450/

### Entity Framework Biweekly Status Updates (2021) · Issue #23884 · dotnet/efcore
https://github.com/dotnet/efcore/issues/23884#issuecomment-926052851

### How to retry failing dotnet tests in GitHub Actions
https://www.cazzulino.com/dotnet-test-retry.html

### Health checks in ASP.Net Core web API
https://dev.to/evdbogaard/health-checks-in-asp-net-core-web-api-1n44

### .NET 6 の Blazor のコンポーネントでクエリ パラメーターを使うのが簡単になりました
https://zenn.dev/okazuki/articles/blazor-wasm-rc1-queryparam

### Creating a GraphQL API with .NET5 and HotChocolate
https://medium.com/@teodor.siustis/creating-a-graphql-api-with-net5-and-hotchocolate-6dfe94626d10

### Exploring the code behind WebApplicationBuilder: Exploring .NET Core 6 - Part 3
https://andrewlock.net/exploring-dotnet-6-part-3-exploring-the-code-behind-webapplicationbuilder/

### Creating Roslyn API-based static analyzer for C#
https://medium.com/pvs-studio/creating-roslyn-api-based-static-analyzer-for-c-c0d7c27489f9

### EFCore でレコードに対するトリガーを実行する - Qiita
https://qiita.com/karuakun/items/2db2e7ff8411e3a455cd

### Generate Code Coverage Report For .NET Core & .NET Framework projects
https://quangnguyennd.medium.com/generate-code-coverage-report-for-net-core-net-framework-projects-249dcad0f515

### SizeBench: a new tool for analyzing Windows binary size
https://devblogs.microsoft.com/performance-diagnostics/sizebench-a-new-tool-for-analyzing-windows-binary-size/?WT.mc_id=DOP-MVP-4039781&fbclid=IwAR0xR2izu6NrtuSTiadrCMEItm0VNV9pj0X5bYwS8AazLkIYOmHvFfzC0vo

### Azure Active Directory's gateway is on .NET Core 3.1! - .NET Blog
https://devblogs.microsoft.com/dotnet/azure-active-directorys-gateway-service-is-on-net-core-3-1/?hss_channel=tw-4083531

### Top 10 .NET Development Companies
https://medium.com/@kanstantsin.lastouski/top-10-net-development-companies-2fa8129ebc48

### Custom deployment layout for Blazor WebAssembly apps - ASP.NET Blog
https://devblogs.microsoft.com/aspnet/custom-deployment-layout-for-blazor-webassembly-apps/

### WPF の Window 上に Direct3D12 でレンダリングする
https://zenn.dev/tan_y/articles/25cc05576ef11a

### The code worked differently when the moon was full
https://www.hanselman.com/blog/the-code-worked-differently-when-the-moon-was-full

### .NET 6 の Blazor で追加された タグの中を変更する機能の紹介
https://zenn.dev/okazuki/articles/blazor-dotnet6-headoutlet

### Utilizing the Model Builder and AutoML for creating Lead Decision and Lead Scoring model in…
https://medium.com/@cekikjmiodrag/utilizing-the-model-builder-and-automl-for-creating-lead-decision-and-lead-scoring-model-in-19888f12d529

## ライブラリ、リポジトリ、ツールなど
### DataGenerator/mxProject.Devs.DataGenerator at main · mxProject/DataGenerator
https://github.com/mxProject/DataGenerator/tree/main/mxProject.Devs.DataGenerator
- [C# データレコード形式のテストデータを生成するライブラリを公開しました。 - Qiita](https://qiita.com/mxProject/items/194b2ae4c11656ae5a09)

### ltrzesniewski/pcre-net: PCRE.NET - Perl Compatible Regular Expressions for .NET
https://github.com/ltrzesniewski/pcre-net

### nsubstitute/NSubstitute: A friendly substitute for .NET mocking libraries.
https://github.com/nsubstitute/NSubstitute

### GitHub - roubachof/Sharpnado.MaterialFrame: A modern Xamarin.Forms Frame component supporting blur, acrylic, dark mode. Implemented with RealtimeBlurView on Android (custom blurview) and UIVisualEffectView on iOS.
https://github.com/roubachof/Sharpnado.MaterialFrame

### jamesmh/coravel: Near-zero config .NET Core micro-framework that makes advanced application features like Task Scheduling, Caching, Queuing, Event Broadcasting, and more a breeze!
https://github.com/jamesmh/coravel

## サイト、ドキュメントなど
### Programming Idioms
https://www.programming-idioms.org/

### Performance Characterization of .NET Benchmarks - Microsoft Research
https://www.microsoft.com/en-us/research/publication/performance-characterization-of-net-benchmarks/

### Apply rounded corners in desktop apps - Windows apps | Microsoft Docs
https://docs.microsoft.com/en-us/windows/apps/desktop/modernize/apply-rounded-corners

### 2021 - UnoConf 2021
https://unoconf.com/

### AspNetCoreDiagnosticScenarios/AsyncGuidance.md at master · davidfowl/AspNetCoreDiagnosticScenarios · GitHub
https://github.com/davidfowl/AspNetCoreDiagnosticScenarios/blob/master/AsyncGuidance.md

### Hello World - Introduction to C# interactive C# tutorial | Microsoft Docs
https://docs.microsoft.com/en-us/dotnet/csharp/tour-of-csharp/tutorials/hello-world

### ツイート
<!-- https://twitter.com/okyrylchuk/status/1442194858425274369?s=12 -->
<blockquote class="twitter-tweet"><p lang="en" dir="ltr">All my tweets about C# 10 features in one thread. 🧵<br><br>Retweets are appreciated 😊<a href="https://twitter.com/hashtag/dotnet?src=hash&amp;ref_src=twsrc%5Etfw">#dotnet</a> <a href="https://twitter.com/hashtag/csharp?src=hash&amp;ref_src=twsrc%5Etfw">#csharp</a> <a href="https://twitter.com/hashtag/coding?src=hash&amp;ref_src=twsrc%5Etfw">#coding</a> <a href="https://twitter.com/hashtag/devcommunity?src=hash&amp;ref_src=twsrc%5Etfw">#devcommunity</a></p>&mdash; Oleg Kyrylchuk (@okyrylchuk) <a href="https://twitter.com/okyrylchuk/status/1442194858425274369?ref_src=twsrc%5Etfw">September 26, 2021</a></blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>


<!-- https://twitter.com/timheuer/status/1440818713582702598?s=12 -->
<blockquote class="twitter-tweet"><p lang="en" dir="ltr">File-scoped namespaces by default...via <a href="https://twitter.com/hashtag/editorconfig?src=hash&amp;ref_src=twsrc%5Etfw">#editorconfig</a> <br><br>csharp_style_namespace_declarations = file_scoped<a href="https://twitter.com/hashtag/dotnet?src=hash&amp;ref_src=twsrc%5Etfw">#dotnet</a> <a href="https://twitter.com/VisualStudio?ref_src=twsrc%5Etfw">@VisualStudio</a> <a href="https://t.co/GifWb0M9WM">pic.twitter.com/GifWb0M9WM</a></p>&mdash; Tim Heuer (@timheuer) <a href="https://twitter.com/timheuer/status/1440818713582702598?ref_src=twsrc%5Etfw">September 22, 2021</a></blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>


<!-- https://twitter.com/vs_debugger/status/1441092957277351951?s=12 -->
<blockquote class="twitter-tweet"><p lang="en" dir="ltr">The project menu in the solution explorer under the Debug now has the “Start Without Debugging” option. This would be helpful when you are working with a multi-project solution.  <a href="https://twitter.com/hashtag/vstip?src=hash&amp;ref_src=twsrc%5Etfw">#vstip</a> <a href="https://twitter.com/hashtag/vsdebuggertip?src=hash&amp;ref_src=twsrc%5Etfw">#vsdebuggertip</a> <a href="https://t.co/SPUXbQmqgN">pic.twitter.com/SPUXbQmqgN</a></p>&mdash; Visual Studio Debugger (@VS_Debugger) <a href="https://twitter.com/VS_Debugger/status/1441092957277351951?ref_src=twsrc%5Etfw">September 23, 2021</a></blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>


<!-- https://twitter.com/davidfowl/status/1441248458657067009?s=12 -->
<blockquote class="twitter-tweet"><p lang="en" dir="ltr"><a href="https://twitter.com/DamianEdwards?ref_src=twsrc%5Etfw">@DamianEdwards</a> and I were playing with this <a href="https://t.co/XpNb27XWsv">https://t.co/XpNb27XWsv</a></p>&mdash; David Fowler 🇧🇧🇺🇸💉💉 (@davidfowl) <a href="https://twitter.com/davidfowl/status/1441248458657067009?ref_src=twsrc%5Etfw">September 24, 2021</a></blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>


<!-- https://twitter.com/davidfowl/status/1441576163734818817?s=12 -->
<blockquote class="twitter-tweet"><p lang="en" dir="ltr">The biggest problem with async await is the “colored functions” problem brilliantly explained by this article <a href="https://t.co/hz5753G8DM">https://t.co/hz5753G8DM</a>. It’s a never ending problem because everything can’t be async and          it’s viral. It’s not a new problem though, it’s always been this way.</p>&mdash; David Fowler 🇧🇧🇺🇸💉💉 (@davidfowl) <a href="https://twitter.com/davidfowl/status/1441576163734818817?ref_src=twsrc%5Etfw">September 25, 2021</a></blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>


<!-- https://twitter.com/maoni0/status/1443344910476726274?s=12 -->
<blockquote class="twitter-tweet"><p lang="en" dir="ltr">I&#39;ve been so busy that I barely look at twitter these days. just published the slides from an internal talk I gave yesterday - very different from my normal GC talks as it touches a bit of all layers - the hardware (MMU), the OS (virtual memory) and the GC <a href="https://t.co/fuZBgq6LGQ">https://t.co/fuZBgq6LGQ</a></p>&mdash; Maoni Stephens (@maoni0) <a href="https://twitter.com/maoni0/status/1443344910476726274?ref_src=twsrc%5Etfw">September 29, 2021</a></blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>


<!-- https://twitter.com/stevensanderson/status/1443288841964638220?s=12 -->
<blockquote class="twitter-tweet"><p lang="en" dir="ltr">Using the new Native Dependencies feature for Blazor WebAssembly on .NET 6, I just managed to call Rust from C#, both running in the browser! It&#39;s a direct p/invoke call - no JS interop. Now, what can we do with this new power? <a href="https://t.co/VkyBekDWFR">pic.twitter.com/VkyBekDWFR</a></p>&mdash; Steve Sanderson (@stevensanderson) <a href="https://twitter.com/stevensanderson/status/1443288841964638220?ref_src=twsrc%5Etfw">September 29, 2021</a></blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>


## Deep Dive
### Obsolete thumbtacked AssemblyName properties by i3arnon · Pull Request #59522 · dotnet/runtime
https://github.com/dotnet/runtime/pull/59522

### NativeAOT breaking change announcements · Issue #1241 · dotnet/runtimelab
https://github.com/dotnet/runtimelab/issues/1241#issuecomment-927188008

### QueryStringEnumerable API by SteveSandersonMS · Pull Request #33910 · dotnet/aspnetcore · GitHub
https://github.com/dotnet/aspnetcore/pull/33910

### Port DllImportGenerator to dotnet/runtime by jkoritzinsky · Pull Request #59363 · dotnet/runtime
https://github.com/dotnet/runtime/pull/59363

### C# string formatting with negative numbers are not working as expected in net5.0 · Issue #59570 · dotnet/runtime
https://github.com/dotnet/runtime/issues/59570

### [wasm] introduce typescript modules by pavelsavara · Pull Request #59392 · dotnet/runtime
https://github.com/dotnet/runtime/pull/59392

### Added VersionConverter by devsko · Pull Request #41384 · dotnet/runtime · GitHub
https://github.com/dotnet/runtime/pull/41384

### Augment Regex extensibility point for better perf and span-based matching · Issue #59629 · dotnet/runtime
https://github.com/dotnet/runtime/issues/59629

### StackTrace Explorer Implementation by ryzngard · Pull Request #56315 · dotnet/roslyn
https://github.com/dotnet/roslyn/pull/56315

### [API Proposal]: bool HashSet.Update(T value, out T actual) · Issue #59468 · dotnet/runtime
https://github.com/dotnet/runtime/issues/59468#issuecomment-925609693

### Licence of Microsoft.Extensions in .NET Core 3.1.x ? · Issue #59740 · dotnet/runtime
https://github.com/dotnet/runtime/issues/59740

### [API Proposal]: File.WriteAllBytes overload for Span and ReadOnlySpan · Issue #59770 · dotnet/runtime
https://github.com/dotnet/runtime/issues/59770

### API proposal: Add File class method overloads for ReadOnlyMemory and ReadOnlySpan · Issue #35054 · dotnet/runtime · GitHub
https://github.com/dotnet/runtime/issues/35054

### [API Proposal]: Extend Memory Mapped Files support · Issue #59776 · dotnet/runtime
https://github.com/dotnet/runtime/issues/59776

### [mono][wasm] Add beginnings of support for WASI. by vargaz · Pull Request #59752 · dotnet/runtime · GitHub
https://github.com/dotnet/runtime/pull/59752

### Add initial codespaces support for dotnet/runtime by eerhardt · Pull Request #59723 · dotnet/runtime
https://github.com/dotnet/runtime/pull/59723
